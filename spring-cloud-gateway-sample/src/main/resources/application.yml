# 测试 URI 配置（用于 RouteConfiguration.java）
test:
  uri: https://jsonplaceholder.typicode.com

spring:
  jmx:
    enabled: false  # 禁用 JMX，避免与 Netty 冲突

  cloud:
    gateway.server.webflux:
      # 默认过滤器：应用于所有路由
      default-filters:
        - AddResponseHeader=X-Gateway, SpringCloudGateway  # 添加网关标识响应头
        - AddRequestHeader=X-Gateway-Request-Timestamp, ${java.time.Instant.now()}  # 添加请求时间戳

# ============================================================================
# 日志配置：开发环境使用 DEBUG/TRACE 级别
# ============================================================================
logging:
  level:
    org.springframework.cloud.gateway: TRACE     # 网关核心日志
    org.springframework.http.server.reactive: DEBUG  # HTTP 服务器日志
    org.springframework.web.reactive: DEBUG      # WebFlux 日志
    reactor.ipc.netty: DEBUG                     # 旧版 Netty 日志
    reactor.netty: DEBUG                         # Reactor Netty 日志

# ============================================================================
# Actuator 管理端点配置
# 允许访问所有管理端点（生产环境应限制）
# ============================================================================
management.endpoints.web.exposure.include: '*'
